<!DOCTYPE html>
<th:block
  th:insert="~{common/layout :: layout (title = ${title} + ' - ' + ${site.title}, canonical = @{/friends}, content = ~{::content}, isPost = true)}"
  th:with="isJournals = true, enableShare = false, baseEnableComment = false"
  xmlns:th="https://www.thymeleaf.org">
  <th:block th:fragment="content">
    <div th:class="${theme.config.page_config.enable_friends_stats} ? 'card card-content friends' : 'card card-content friends-hide-stats'">
      <div class="card-tab">
        <div>[[${#strings.replace(title, ' - ' + site.title, '')}]]</div>
      </div>
      <nav class="level" th:if="${theme.config.page_config.enable_friends_stats}" th:with="stats = ${friendFinder.statistical()}">
        <div class="level-item">
          <div>
            <p class="heading">订阅数</p>
            <p class="value" th:title="${stats.friendsNum}" th:text="${stats.friendsNum}"></p>
          </div>
        </div>
        <div class="level-item">
          <div>
            <p class="heading">订阅成功数</p>
            <p class="value" th:title="${stats.activeNum}" th:text="${stats.activeNum}"></p>
          </div>
        </div>
        <div class="level-item">
          <div>
            <p class="heading">订阅文章数</p>
            <p class="value" th:title="${stats.articleNum}" th:text="${stats.articleNum}"></p>
          </div>
        </div>
      </nav>
    </div>
    <div class="card card-content friends" th:each="friend : ${friends.items}" th:with="spec = ${friend.spec}">
      <p class="friends-title">
        <a th:href="${spec.link}" target="_blank">
          <span th:text="${spec.title}"></span>
        </a>
      </p>
      <div class="friends-content fold">
        <div class="main-content not-toc description">
          <span th:text="${spec.description}"></span>
        </div>
      </div>
      <div class="friends-date">
        <a th:href="${spec.url}" target="_blank">
          <img th:src="${spec.logo}" alt="avatar">
          <span th:text="${spec.author}"></span>
        </a>
        <em th:text="'发表于 ' + ${#dates.format(spec.pubDate,'yyyy年MM月dd日 HH:mm:ss')}"></em>
      </div>
    </div>
    <th:block th:replace="~{main/pagination :: pagination (${friends}, '/friends')}"/>
  </th:block>
</th:block>
